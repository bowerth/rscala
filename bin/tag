#!/bin/bash

set -e

MAJOR=$(cat build.sbt | grep "^version := " | cut -d '"' -f 2)

if [[ -n "$(git status --porcelain | wc -l)" ]]
then
  2>&1 echo "The repository is not clean."
  exit 1
fi

git pull
git push

exit

git tag -a v$MAJOR -m "Version $MAJOR"
git push origin --tags

